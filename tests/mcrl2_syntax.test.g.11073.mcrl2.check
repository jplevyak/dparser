15792 states 10228 scans 10228 shifts 48386 reductions 4 compares 0 ambiguities
((( map ((( enableFix1 (( ,  enableFix2 )( ,  enableSessionIds )( ,  wrapSessionIds )( ,  clearBuffersOnWrap ))) :  Bool ) ; ))( eqn (( enableFix1  =  true  ; )( enableFix2  =  true  ; )( enableSessionIds  =  true  ; )( wrapSessionIds  =  true  ; )( clearBuffersOnWrap  =  true  ; )))( map ((( M ) :  Nat ) ; ))( eqn ( M  =  1  ; ))( map ((( maxSessionId ) :  Nat ) ; ))( eqn ( maxSessionId  =  1  ; ))( sort ( Id  =  Nat  ; ))( sort ( SessionId  =  Nat  ; ))( map ((( session0 ) :  Nat ) ; ))( eqn ( session0  =  0  ; ))( map ((( next ) : ( Nat  ->  Nat )) ; ))(( var (((( n ) :  Nat )) ; )) eqn (((( ( ( enableSessionIds  &&  wrapSessionIds ) ) ) -> )( next  ( ( n ) ) ) = (( ( ( n  +  1 ) ) ) mod ( Nat2Pos  ( (( maxSessionId  +  1 )) ) )) ; )((( ( ( enableSessionIds  && ( !  wrapSessionIds )) ) ) -> )( next  ( ( n ) ) ) = ( n  +  1 ) ; )((( !  enableSessionIds ) -> )( next  ( ( n ) ) ) =  n  ; )))( sort ( ChannelId  = ( struct (( agent_in ( ( (( Id )) ) ))(( | ( agent_out ( ( (( Id )) ) )))( | ( manager_in ( ( (( Id )) ) )))( | ( manager_out ( ( (( Id )) ) )))))) ; ))( sort ( AssociationResponse  = ( struct (( rejected )(( | ( accepted ( ( (( Configuration )) ) )))( | ( accepted_unknown_config ))))) ; ))( sort ( ConfigEventReportResponse  = ( struct (( accepted_config ( ( (( Configuration )) ) ))( | ( unsupported_config )))) ; ))( sort ( Configuration  = ( struct (( c1 )( | ( c2 )))) ; ))( sort ( Data  = ( struct (( datum1 ))) ; ))( sort ( Signal  = ( struct (( sig_AssocReq ( ( (( SessionId )) ) ))(( | ( sig_AssocRelReq ))( | ( sig_AssocAbort ))( | ( sig_AssocRelRsp ))( | ( sig_AssocRsp ( ( (( SessionId )( , ( AssociationResponse ))) ) )))( | ( sig_ConfigEventReportReq ))( | ( sig_ConfigEventReportRsp ( ( (( ConfigEventReportResponse )) ) )))))) ; ))( sort ( Message  = ( struct (( signal ( ( (( Signal )) ) ))( | ( data ( ( (( Data )) ) ))))) ; ))( map (((( AssocReq ) : ( SessionId  ->  Message )) ; )((( AssocRelReq (( ,  AssocAbort )( ,  AssocRelRsp ))) :  Message ) ; )((( AssocRsp ) : (( SessionId  #  AssociationResponse ) ->  Message )) ; )((( ConfigEventReportReq ) :  Message ) ; )((( ConfigEventReportRsp ) : ( ConfigEventReportResponse  ->  Message )) ; )))(( var ((((( t ) :  SessionId )) ; )(((( ar ) :  AssociationResponse )) ; )(((( cr ) :  ConfigEventReportResponse )) ; )(((( c ) :  Configuration )) ; ))) eqn ((( AssocReq  ( ( t ) ) ) = ( signal  ( (( sig_AssocReq  ( ( t ) ) )) ) ) ; )( AssocRelReq  = ( signal  ( ( sig_AssocRelReq ) ) ) ; )( AssocAbort  = ( signal  ( ( sig_AssocAbort ) ) ) ; )( AssocRelRsp  = ( signal  ( ( sig_AssocRelRsp ) ) ) ; )(( AssocRsp  ( ( t ( ,  ar )) ) ) = ( signal  ( (( sig_AssocRsp  ( ( t ( ,  ar )) ) )) ) ) ; )( ConfigEventReportReq  = ( signal  ( ( sig_ConfigEventReportReq ) ) ) ; )(( ConfigEventReportRsp  ( ( cr ) ) ) = ( signal  ( (( sig_ConfigEventReportRsp  ( ( cr ) ) )) ) ) ; )))( act (( send (( ,  receive )( ,  communicate )))( : ( ChannelId  #  Message )) ; ))( act ((( assocReq ) ; )(( assocAbortReq ) ; )(( assocRelReq ) ; )(( sendConfigReportReq ) ; )(( LookupConfig ) ; )(( agentSuppliedUnsupportedConfigReq ) ; )(( agentSuppliedSupportedConfigReq ) ; )))( act ((( transport_connect_agent ) ; )(( transport_connect_manager ) ; )(( transport_connect_notify ) ; )(( transport_connect ) ; )(( clear ) ; )(( reset_buffers ) ; )(( Reset_Buffers ) ; )(( transport_disconnect_agent ) ; )(( transport_disconnect_manager ) ; )(( transport_disconnect_notify ) ; )(( transport_disconnect ) ; )))( act (( operating )( :  Configuration ) ; ))( sort ( Agent_states  = ( struct (( Agent_Disconnected )(( | ( Agent_Connected ))( | ( Agent_nop ))))) ; ))( sort ( Agent_Connected_states  = ( struct (( Agent_Connected_Disassociating )(( | ( Agent_Connected_Unassociated ))( | ( Agent_Connected_Associating ))( | ( Agent_Connected_Associated ))( | ( Agent_Connected_nop ))))) ; ))( sort ( Agent_Connected_Associated_states  = ( struct (( Agent_Connected_Associated_Operating ( ( (( Configuration )) ) ))(( | ( Agent_Connected_Associated_Configuring ))( | ( Agent_Connected_Associated_nop ))))) ; ))( sort ( Agent_Connected_Associated_Configuring_states  = ( struct (( Agent_Connected_Associated_Configuring_WaitingApproval )(( | ( Agent_Connected_Associated_Configuring_SendingConfig ))( | ( Agent_Connected_Associated_Configuring_nop ))))) ; ))( proc ( Agent ( ( ((( id ) :  Id )(( , (( t ) :  SessionId ))( , (( Agent_state ) :  Agent_states ))( , (( Agent_Connected_state ) :  Agent_Connected_states ))( , (( Agent_Connected_Associated_state ) :  Agent_Connected_Associated_states ))( , (( Agent_Connected_Associated_Configuring_state ) :  Agent_Connected_Associated_Configuring_states )))) ) ) = (((((((((( ( ( Agent_state  ==  Agent_Disconnected ) ) ) -> ( ( (( transport_connect_agent ) . ( Agent  ( (( Agent_state  =  Agent_Connected )( , ( Agent_Connected_state  =  Agent_Connected_Unassociated ))) ) )) ) )) + (( ( ( Agent_state  ==  Agent_Connected ) ) ) -> ( ( (( transport_disconnect_agent ) . ( Agent  ( (( Agent_state  =  Agent_Disconnected )(( , ( Agent_Connected_state  =  Agent_Connected_nop ))( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )) ) ))) + (( ( (( Agent_state  ==  Agent_Connected ) && ( Agent_Connected_state  ==  Agent_Connected_Disassociating )) ) ) -> ( ( ((((((((( assocRelReq ) . ( Agent  (  ) )) + ((( assocAbortReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocRelRsp )) ) ))) . ( Agent  (  ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + ( ( ( enableFix2  -> ( sum ((( r ) :  ConfigEventReportResponse )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( r ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))) ) )) ) ))) + (( ( (( Agent_state  ==  Agent_Connected ) && ( Agent_Connected_state  ==  Agent_Connected_Unassociated )) ) ) -> ( ( (((((((((( ( (( t  ==  maxSessionId ) &&  clearBuffersOnWrap ) ) ) -> ((( reset_buffers ) . (( assocReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( , ( AssocReq  ( (( next  ( ( t ) ) )) ) ))) ) )))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Associating )( , ( t  = ( next  ( ( t ) ) )))) ) )) <> ((( assocReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( , ( AssocReq  ( (( next  ( ( t ) ) )) ) ))) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Associating )( , ( t  = ( next  ( ( t ) ) )))) ) ))) + (( assocRelReq ) . ( Agent  (  ) ))) + (( assocAbortReq ) . ( Agent  (  ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  rejected )) ) ))) ) ))) . ( Agent  (  ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  (  ) )))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  (  ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( Agent  (  ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  (  ) ))) + ( ( ( enableFix2  -> ( sum ((( r ) :  ConfigEventReportResponse )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( r ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  (  ) )))) ) )) ) ))) + (( ( (( Agent_state  ==  Agent_Connected ) && ( Agent_Connected_state  ==  Agent_Connected_Associating )) ) ) -> ( ( (((((((((((( assocRelReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )) + ((( assocAbortReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  rejected )) ) ))) ) ))) . ( Agent  (  ) )))) + ( sum ((( c ) :  Configuration )( , (( t' ) :  SessionId ))) . (( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( , ( accepted  ( ( c ) ) ))) ) ))) ) )) . (( ( ( t  ==  t' ) ) ) -> ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Associated )( , ( Agent_Connected_Associated_state  = ( Agent_Connected_Associated_Operating  ( ( c ) ) )))) ) ) <> (( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))))) + ( sum ((( t' ) :  SessionId )) . (( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  accepted_unknown_config )) ) ))) ) )) . (( ( ( t  ==  t' ) ) ) -> ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Associated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_Configuring ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_SendingConfig )))) ) ) <> (( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))))) + ( sum ((( t' ) :  SessionId )) . (( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  rejected )) ) ))) ) )) . ( ( (( ( ( t  ==  t' ) ) ) -> ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ) <> (( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) ) )))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) ))) + ( ( ( enableFix2  -> ( sum ((( r ) :  ConfigEventReportResponse )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( r ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )) ) )))) ) )) ) ))) + (( ( (( Agent_state  ==  Agent_Connected ) && ( Agent_Connected_state  ==  Agent_Connected_Associated )) ) ) -> ( ( ((((((((( assocRelReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocRelReq )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Disassociating )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )) + ((( assocAbortReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocRelRsp )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) ))) + ((( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) ))) + (( receive ( ( (( agent_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) ))) ) ))) + ( sum ((( c ) :  Configuration )) . (( ( (( Agent_state  ==  Agent_Connected ) && (( Agent_Connected_state  ==  Agent_Connected_Associated ) && ( Agent_Connected_Associated_state  == ( Agent_Connected_Associated_Operating  ( ( c ) ) )))) ) ) -> ( ( (((( operating ( ( ( c ) ) )) . ( Agent  (  ) )) + ( sum ((( d ) :  Data )) . (( send ( ( (( agent_out  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( Agent  (  ) )))) + ( ( ( enableFix2  -> ( sum ((( r ) :  ConfigEventReportResponse )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( r ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )))) ) )) ) )))) + (( ( (( Agent_state  ==  Agent_Connected ) && (( Agent_Connected_state  ==  Agent_Connected_Associated ) && (( Agent_Connected_Associated_state  ==  Agent_Connected_Associated_Configuring ) && ( Agent_Connected_Associated_Configuring_state  ==  Agent_Connected_Associated_Configuring_WaitingApproval )))) ) ) -> ( ( ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( unsupported_config ) ) ))) ) )) . ( Agent  ( (( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_SendingConfig )) ) )) + ( sum ((( c ) :  Configuration )) . (( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( (( accepted_config  ( ( c ) ) )) ) ))) ) )) . ( Agent  ( (( Agent_Connected_Associated_state  = ( Agent_Connected_Associated_Operating  ( ( c ) ) ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop ))) ) )))) ) ))) + (( ( (( Agent_state  ==  Agent_Connected ) && (( Agent_Connected_state  ==  Agent_Connected_Associated ) && (( Agent_Connected_Associated_state  ==  Agent_Connected_Associated_Configuring ) && ( Agent_Connected_Associated_Configuring_state  ==  Agent_Connected_Associated_Configuring_SendingConfig )))) ) ) -> ( ( (((( sendConfigReportReq ) | ( send ( ( (( agent_out  ( ( id ) ) )( ,  ConfigEventReportReq )) ) ))) . ( Agent  ( (( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_WaitingApproval )) ) )) + ( ( ( enableFix2  -> ( sum ((( r ) :  ConfigEventReportResponse )) . ((( receive ( ( (( agent_in  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( r ) ) ))) ) )) . ( send ( ( (( agent_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Agent  ( (( Agent_Connected_state  =  Agent_Connected_Unassociated )(( , ( Agent_Connected_Associated_state  =  Agent_Connected_Associated_nop ))( , ( Agent_Connected_Associated_Configuring_state  =  Agent_Connected_Associated_Configuring_nop )))) ) )))) ) )) ) ))) ; ))( sort ( Manager_states  = ( struct (( Manager_Disconnected )(( | ( Manager_Connected ))( | ( Manager_nop ))))) ; ))( sort ( Manager_Connected_states  = ( struct (( Manager_Connected_Disassociating )(( | ( Manager_Connected_Unassociated ))( | ( Manager_Connected_Associating ))( | ( Manager_Connected_Associated ))( | ( Manager_Connected_nop ))))) ; ))( sort ( Manager_Connected_Associated_states  = ( struct (( Manager_Connected_Associated_Operating ( ( (( Configuration )) ) ))(( | ( Manager_Connected_Associated_Configuring ))( | ( Manager_Connected_Associated_nop ))))) ; ))( sort ( Manager_Connected_Associated_Configuring_states  = ( struct (( Manager_Connected_Associated_Configuring_CheckingConfig )(( | ( Manager_Connected_Associated_Configuring_WaitingForConfig ))( | ( Manager_Connected_Associated_Configuring_nop ))))) ; ))( proc ( Manager ( ( ((( id ) :  Id )(( , (( t ) :  SessionId ))( , (( Manager_state ) :  Manager_states ))( , (( Manager_Connected_state ) :  Manager_Connected_states ))( , (( Manager_Connected_Associated_state ) :  Manager_Connected_Associated_states ))( , (( Manager_Connected_Associated_Configuring_state ) :  Manager_Connected_Associated_Configuring_states )))) ) ) = (((((((((( ( ( Manager_state  ==  Manager_Disconnected ) ) ) -> ( ( (( transport_connect_manager ) . ( Manager  ( (( Manager_state  =  Manager_Connected )( , ( Manager_Connected_state  =  Manager_Connected_Unassociated ))) ) )) ) )) + (( ( ( Manager_state  ==  Manager_Connected ) ) ) -> ( ( (( transport_disconnect_manager ) . ( Manager  ( (( Manager_state  =  Manager_Disconnected )(( , ( Manager_Connected_state  =  Manager_Connected_nop ))( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )) ) ))) + (( ( (( Manager_state  ==  Manager_Connected ) && ( Manager_Connected_state  ==  Manager_Connected_Disassociating )) ) ) -> ( ( (((((((((( assocRelReq ) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )) + ((( assocAbortReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocRelRsp )) ) ))) . ( Manager  (  ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ( ( ( enableFix1  -> ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) ) )) + ( sum ((( d ) :  Data )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) ) ))) + (( ( (( Manager_state  ==  Manager_Connected ) && ( Manager_Connected_state  ==  Manager_Connected_Unassociated )) ) ) -> ( ( (((((((((( assocRelReq ) . ( Manager  (  ) )) + ((( assocAbortReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) ))) + ( sum ((( t' ) :  SessionId )) . (( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Associating )( , ( t  =  t' ))) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) )))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( Manager  (  ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Manager  (  ) ))) + ( ( ( enableFix1  -> ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) ))) ) )) + ( sum ((( d ) :  Data )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) )))) ) ))) + (( ( (( Manager_state  ==  Manager_Connected ) && ( Manager_Connected_state  ==  Manager_Connected_Associating )) ) ) -> ( ( (((((((((((((( assocRelReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )) + ((( assocAbortReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  (  ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ((( LookupConfig ) | ( send ( ( (( manager_out  ( ( id ) ) )( , ( AssocRsp  ( ( t ( ,  rejected )) ) ))) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) + ( sum ((( c ) :  Configuration )) . ((( LookupConfig ) | ( send ( ( (( manager_out  ( ( id ) ) )( , ( AssocRsp  ( ( t ( , ( accepted  ( ( c ) ) ))) ) ))) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Associated )( , ( Manager_Connected_Associated_state  = ( Manager_Connected_Associated_Operating  ( ( c ) ) )))) ) )))) + ((( LookupConfig ) | ( send ( ( (( manager_out  ( ( id ) ) )( , ( AssocRsp  ( ( t ( ,  accepted_unknown_config )) ) ))) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Associated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_Configuring ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_WaitingForConfig )))) ) ))) + ( ( ( enableFix1  -> ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) ))) ) )) + ( sum ((( d ) :  Data )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )) ) )))) ) ))) + (( ( (( Manager_state  ==  Manager_Connected ) && ( Manager_Connected_state  ==  Manager_Connected_Associated )) ) ) -> ( ( ((((((((( assocRelReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocRelReq )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Disassociating )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )) + ((( assocAbortReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) + ( sum ((( t' ) :  SessionId )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocReq  ( ( t' ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )))) + ( sum ((( r ) :  AssociationResponse )( , (( t' ) :  SessionId ))) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( AssocRsp  ( ( t' ( ,  r )) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocRelRsp )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) + ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocRelRsp )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) + (( receive ( ( (( manager_in  ( ( id ) ) )( ,  AssocAbort )) ) )) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) ) ))) + ( sum ((( c ) :  Configuration )) . (( ( (( Manager_state  ==  Manager_Connected ) && (( Manager_Connected_state  ==  Manager_Connected_Associated ) && ( Manager_Connected_Associated_state  == ( Manager_Connected_Associated_Operating  ( ( c ) ) )))) ) ) -> ( ( (((( operating ( ( ( c ) ) )) . ( Manager  (  ) )) + ( sum ((( d ) :  Data )) . (( receive ( ( (( manager_in  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( Manager  (  ) )))) + ( ( ( enableFix1  -> ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) ) )) ) )))) + (( ( (( Manager_state  ==  Manager_Connected ) && (( Manager_Connected_state  ==  Manager_Connected_Associated ) && (( Manager_Connected_Associated_state  ==  Manager_Connected_Associated_Configuring ) && ( Manager_Connected_Associated_Configuring_state  ==  Manager_Connected_Associated_Configuring_CheckingConfig )))) ) ) -> ( ( (((((( agentSuppliedUnsupportedConfigReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( , ( ConfigEventReportRsp  ( ( unsupported_config ) ) ))) ) ))) . ( Manager  ( (( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_WaitingForConfig )) ) )) + ( sum ((( c ) :  Configuration )) . ((( agentSuppliedSupportedConfigReq ) | ( send ( ( (( manager_out  ( ( id ) ) )( , ( ConfigEventReportRsp  ( (( accepted_config  ( ( c ) ) )) ) ))) ) ))) . ( Manager  ( (( Manager_Connected_Associated_state  = ( Manager_Connected_Associated_Operating  ( ( c ) ) ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop ))) ) )))) + ( ( ( enableFix1  -> ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) ))) ) )) + ( sum ((( d ) :  Data )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )))) ) ))) + (( ( (( Manager_state  ==  Manager_Connected ) && (( Manager_Connected_state  ==  Manager_Connected_Associated ) && (( Manager_Connected_Associated_state  ==  Manager_Connected_Associated_Configuring ) && ( Manager_Connected_Associated_Configuring_state  ==  Manager_Connected_Associated_Configuring_WaitingForConfig )))) ) ) -> ( ( ((( receive ( ( (( manager_in  ( ( id ) ) )( ,  ConfigEventReportReq )) ) )) . ( Manager  ( (( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_CheckingConfig )) ) )) + ( sum ((( d ) :  Data )) . ((( receive ( ( (( manager_in  ( ( id ) ) )( , ( data  ( ( d ) ) ))) ) )) . ( send ( ( (( manager_out  ( ( id ) ) )( ,  AssocAbort )) ) ))) . ( Manager  ( (( Manager_Connected_state  =  Manager_Connected_Unassociated )(( , ( Manager_Connected_Associated_state  =  Manager_Connected_Associated_nop ))( , ( Manager_Connected_Associated_Configuring_state  =  Manager_Connected_Associated_Configuring_nop )))) ) )))) ) ))) ; ))( proc ( Buffer ( ( ((( channel_in ( ,  channel_out )) :  ChannelId )( , (( buf ) : ( List  (  Message  ) )))) ) ) = (((( sum ((( m ) :  Message )) . (( ( (( #  buf ) <  M ) ) ) -> (( receive ( ( ( channel_in ( ,  m )) ) )) . ( Buffer ( ( ( channel_in (( ,  channel_out )( , ( buf  <|  m )))) ) ))))) + (( ( ( buf  != ( [  ] )) ) ) -> (( send ( ( ( channel_out ( , ( head  ( ( buf ) ) ))) ) )) . ( Buffer ( ( ( channel_in (( ,  channel_out )( , ( tail  ( ( buf ) ) )))) ) ))))) + (( clear ) . ( Buffer ( ( ( channel_in (( ,  channel_out )( , ( [  ] )))) ) )))) + (( reset_buffers ) . ( Buffer ( ( ( channel_in (( ,  channel_out )( , ( [  ] )))) ) )))) ; ))( proc ( A2M ( ( ((( aid ( ,  mid )) :  Id )( , (( buf ) : ( List  (  Message  ) )))) ) ) = ( Buffer ( ( (( agent_out  ( ( aid ) ) )(( , ( manager_in  ( ( mid ) ) ))( ,  buf ))) ) )) ; ))( proc ( M2A ( ( ((( mid ( ,  aid )) :  Id )( , (( buf ) : ( List  (  Message  ) )))) ) ) = ( Buffer ( ( (( manager_out  ( ( mid ) ) )(( , ( agent_in  ( ( aid ) ) ))( ,  buf ))) ) )) ; )))( init ( hide  ( ( { ( assocReq (( ,  assocAbortReq )( ,  assocRelReq )( ,  sendConfigReportReq )( ,  LookupConfig )( ,  agentSuppliedUnsupportedConfigReq )( ,  agentSuppliedSupportedConfigReq ))) } ) , ( allow  ( ( { (( communicate )(( , ( transport_connect ))( , ( transport_disconnect ))( , ( operating ))( , ( operating ( |  operating )))( , ( Reset_Buffers ))( , ( communicate ( |  assocReq )))( , ( communicate ( |  assocAbortReq )))( , ( communicate ( |  assocRelReq )))( , ( communicate ( |  sendConfigReportReq )))( , ( communicate ( |  LookupConfig )))( , ( communicate ( |  agentSuppliedUnsupportedConfigReq )))( , ( communicate ( |  agentSuppliedSupportedConfigReq ))))) } ) , ( comm  ( ( { (( send  | ( receive ) ->  communicate )(( , ( transport_connect_agent  | ( transport_connect_manager ) ->  transport_connect ))( , ( transport_disconnect_agent  | ( transport_disconnect_manager (( |  clear )( |  clear ))) ->  transport_disconnect ))( , ( reset_buffers  | ( reset_buffers ( |  reset_buffers )) ->  Reset_Buffers )))) } ) , (( Agent ( ( ( 0 (( ,  session0 )( ,  Agent_Disconnected )( ,  Agent_Connected_nop )( ,  Agent_Connected_Associated_nop )( ,  Agent_Connected_Associated_Configuring_nop ))) ) )) || (( A2M ( ( ( 0 (( ,  1 )( , ( [  ] )))) ) )) || (( M2A ( ( ( 1 (( ,  0 )( , ( [  ] )))) ) )) || ( Manager ( ( ( 1 (( ,  session0 )( ,  Manager_Disconnected )( ,  Manager_Connected_nop )( ,  Manager_Connected_Associated_nop )( ,  Manager_Connected_Associated_Configuring_nop ))) ) ))))) ) ) ) ) ) ) ; ))
